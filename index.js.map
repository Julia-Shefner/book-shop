{"version":3,"file":"index.js","sources":["../src/js/books.js","../src/js/event.js","../src/js/feedbacks.js","../src/js/header.js","../src/js/modal-book.js"],"sourcesContent":["const API_BASE = 'https://books-backend.p.goit.global/books';\nconst booksList = document.getElementById('booksList');\nconst showMoreBtn = document.getElementById('showMoreBtn');\nconst booksCount = document.getElementById('booksCount');\nconst categorySelect = document.getElementById('categorySelect');\nconst categoriesList = document.getElementById('categoriesList');\n\nlet allBooks = [];\nlet filteredBooks = [];\nlet visibleCount = 0;\n\n// Динамічні налаштування\nfunction getChunkSize() {\n  if (window.innerWidth >= 768) return 24; // таблет / десктоп\n  return 10; // мобідка\n}\nfunction getLoadStep() {\n  return 4;\n}\n\n// Отримати всі книги\nasync function fetchBooks() {\n  try {\n    const res = await fetch(`${API_BASE}/top-books`);\n    if (!res.ok) throw new Error('Failed to load books');\n    const data = await res.json();\n\n    allBooks = data.flatMap(cat =>\n      cat.books.map(b => ({ ...b, category: cat.list_name }))\n    );\n    filteredBooks = [...allBooks];\n\n    const categories = [...new Set(data.map(c => c.list_name))];\n    fillCategories(categories);\n    visibleCount = 0;\n    renderBooks();\n  } catch (err) {\n    console.error('Error loading books:', err);\n  }\n}\n\n// Заповнення селекту та списку\nfunction fillCategories(categories) {\n  // селект (для мобілки/планшету)\n  if (categorySelect) {\n    categorySelect.innerHTML = `<option value=\"\">All Categories</option>`;\n    categorySelect.innerHTML += categories\n      .map(c => `<option value=\"${c}\">${c}</option>`)\n      .join('');\n  }\n\n  // список (для десктопу)\n  if (categoriesList) {\n    categoriesList.innerHTML = categories\n      .map(c => `<li data-category=\"${c}\">${c}</li>`)\n      .join('');\n  }\n}\n\n// Рендер книг\nfunction renderBooks() {\n  const chunk = getChunkSize();\n  const step = getLoadStep();\n  const end = visibleCount === 0 ? chunk : visibleCount + step;\n\n  const booksToShow = filteredBooks.slice(0, end);\n\n  booksList.innerHTML = booksToShow\n    .map(\n      b => `\n      <li class=\"book-card\">\n        <img class=\"book-image\" src=\"${b.book_image}\" alt=\"${b.title}\" />\n        <div class=\"book-info\">\n          <div>\n            <h3 class=\"book-title\">${b.title}</h3>\n            <p class=\"book-author\">${b.author}</p>\n          </div>\n          <p class=\"book-price\">$${(Math.random() * 90 + 10).toFixed(2)}</p>\n        </div>\n        <button class=\"learn-more-btn\">Learn More</button>\n      </li>`\n    )\n    .join('');\n\n  visibleCount = booksToShow.length;\n  booksCount.textContent = `Showing ${visibleCount} of ${filteredBooks.length}`;\n  showMoreBtn.style.display =\n    visibleCount < filteredBooks.length ? 'block' : 'none';\n}\n\n// Показати більше\nshowMoreBtn.addEventListener('click', renderBooks);\n\n// Фільтрація\nfunction filterByCategory(category) {\n  visibleCount = 0;\n  if (!category) {\n    filteredBooks = [...allBooks];\n    renderBooks();\n    return;\n  }\n  fetchCategoryBooks(category);\n}\n\nasync function fetchCategoryBooks(category) {\n  try {\n    const res = await fetch(\n      `${API_BASE}/category?category=${encodeURIComponent(category)}`\n    );\n    if (!res.ok) throw new Error('Failed to load category books');\n    const data = await res.json();\n    filteredBooks = data;\n    renderBooks();\n  } catch (err) {\n    console.error('Error loading category books:', err);\n  }\n}\n\n//  Обробники подій\ncategorySelect.addEventListener('change', e => {\n  filterByCategory(e.target.value);\n});\n\ncategoriesList.addEventListener('click', e => {\n  if (e.target.tagName === 'LI') {\n    const selected = e.target.getAttribute('data-category');\n    document\n      .querySelectorAll('.categories-list li')\n      .forEach(li => li.classList.remove('active'));\n    e.target.classList.add('active');\n    filterByCategory(selected);\n  }\n});\n\n// Ініціалізація\nfetchBooks();\n","import Swiper from 'swiper';\nimport 'swiper/css';\nimport 'swiper/css/pagination';\nimport { Navigation, Pagination, Keyboard } from 'swiper/modules';\n\nlet eventsSwiper;\n\nfunction swiperInit() {\n  if (window.innerWidth < 1440) {\n    eventsSwiper = new Swiper('.events-swiper', {\n      modules: [Navigation, Pagination, Keyboard],\n      pagination: {\n        el: '.swiper-pagination',\n        clickable: true,\n      },\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev',\n      },\n      keyboard: {\n        enabled: true,\n        onlyInViewport: true,\n      },\n      breakpoints: {\n        375: { slidesPerView: 1 },\n        768: { slidesPerView: 2, spaceBetween: 24 },\n      },\n    });\n  } else {\n    eventsSwiper.destroy(true, true);\n    eventsSwiper = null;\n  }\n}\n\nswiperInit();\n","import Swiper from \"swiper\";\nimport \"swiper/css\";\nimport \"swiper/css/pagination\";\nimport { Navigation, Pagination, Keyboard } from \"swiper/modules\";\n\nnew Swiper(\".feedback-swiper\", {\n  modules: [Navigation, Pagination, Keyboard],\n  pagination: {\n    el: \".swiper-pagination\",\n    clickable: true,\n  },\n  navigation: {\n    nextEl: \".swiper-button-next\",\n    prevEl: \".swiper-button-prev\",\n  },\n  keyboard: {\n    enabled: true,         // Увімкнути керування з клавіатури\n    onlyInViewport: true,  // Працює лише коли слайдер у полі зору\n  },\n  grabCursor: true,\n  breakpoints: {\n    375: {\n      slidesPerView: 1,\n      spaceBetween: 20,\n    },\n    768: {\n      slidesPerView: 2,\n      spaceBetween: 24,\n    },\n    1440: {\n      slidesPerView: 3,\n      spaceBetween: 24,\n    },\n  },\n});","const burgerBtn = document.querySelector('.burger-js');\nconst menu = document.querySelector('.header-menu');\nconst body = document.body;\nconst closeBtn = document.querySelector('.close-js');\nconst navList = document.querySelectorAll('.header-nav-link');\n\nburgerBtn.addEventListener('click', clickBurgerBtn);\nfunction clickBurgerBtn() {\n  menu.classList.add('active');\n  body.classList.add('menu-open');\n  window.addEventListener('keydown', onEscPress);\n}\n\ncloseBtn.addEventListener('click', clickCloseBtn);\nfunction clickCloseBtn() {\n  menu.classList.remove('active');\n  body.classList.remove('menu-open');\n  window.removeEventListener('keydown', onEscPress);\n}\nnavList.forEach(link => {\n  link.addEventListener('click', () => {\n    menu.classList.remove('active');\n    body.classList.remove('menu-open');\n  });\n});\n\nfunction onEscPress(event) {\n  if (event.key === 'Escape' || event.code === 'Escape') {\n    clickCloseBtn();\n  }\n}\n","// \"import \"accordion-js/dist/accordion.min.css\";\" потрібно додатково додати в файл js після \"import Accordion from \"accordion-js\";\"\n// ====== ІМПОРТИ ======\nimport Accordion from 'accordion-js';\nimport 'accordion-js/dist/accordion.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  position: 'topRight',\n  transitionIn: 'fadeInDown',\n  transitionOut: 'fadeOutUp',\n});\n\n// ====== ІНІЦІАЛІЗАЦІЯ АКОРДЕОНУ ======\nnew Accordion('.js-accordion', { duration: 300 });\n\n// ====== ЕЛЕМЕНТИ ======\nconst backdrop = document.getElementById('modal-backdrop');\nconst closeBtn = document.getElementById('close-modal');\nconst addToCartBtn = document.getElementById('add-to-cart');\nconst buyNowBtn = document.getElementById('buy-now');\nconst quantityInput = document.getElementById('quantity');\nconst increase = document.getElementById('increase');\nconst decrease = document.getElementById('decrease');\n\n// ====== ВІДКРИТТЯ МОДАЛКИ ======\ndocument.addEventListener('click', e => {\n  if (e.target.classList.contains('learn-more-btn')) {\n    const bookCard = e.target.closest('.book-card');\n\n    if (bookCard) {\n      const img = bookCard.querySelector('.book-image')?.src || '';\n      const title =\n        bookCard.querySelector('.book-title')?.textContent || 'Untitled';\n      const author =\n        bookCard.querySelector('.book-author')?.textContent || 'Unknown';\n      const price =\n        bookCard.querySelector('.book-price')?.textContent || '$0.00';\n\n      // заповнюємо модалку\n      document.getElementById('book-image').src = img;\n      document.getElementById('book-title').textContent = title;\n      document.getElementById('book-author').textContent = author;\n      document.getElementById('book-price').textContent = price;\n      document.getElementById('details').textContent =\n        'This is a placeholder description for the book.';\n      document.getElementById('shipping').textContent = 'Ships in 2–3 days.';\n      document.getElementById('returns').textContent = '30-day return policy.';\n\n      // відкриваємо модалку\n      backdrop.classList.remove('is-hidden');\n      document.body.style.overflow = 'hidden';\n    }\n  }\n});\n\n// ====== ЗАКРИТТЯ ======\nfunction closeModal() {\n  backdrop.classList.add('is-hidden');\n  document.body.style.overflow = '';\n}\n\ncloseBtn.addEventListener('click', closeModal);\nbackdrop.addEventListener('click', e => {\n  if (e.target === backdrop) closeModal();\n});\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape') closeModal();\n});\n\n// ====== КІЛЬКІСТЬ ======\nif (increase && decrease && quantityInput) {\n  increase.addEventListener('click', () => {\n    quantityInput.value = parseInt(quantityInput.value) + 1;\n  });\n\n  decrease.addEventListener('click', () => {\n    if (parseInt(quantityInput.value) > 1) {\n      quantityInput.value = parseInt(quantityInput.value) - 1;\n    }\n  });\n}\n\n// ====== TOAST-ПОВІДОМЛЕННЯ ======\naddToCartBtn.addEventListener('click', () => {\n  const qty = quantityInput.value;\n  iziToast.show({\n    message: `📚 Додано ${qty} книг у кошик`,\n    backgroundColor: '#fff9e6',\n    messageColor: '#000',\n  });\n});\n\nbuyNowBtn.addEventListener('click', e => {\n  e.preventDefault();\n  iziToast.show({\n    message: '📖 Дякуємо за покупку!',\n    backgroundColor: '#fff9e6',\n    messageColor: '#000',\n  });\n});\n"],"names":["API_BASE","booksList","showMoreBtn","booksCount","categorySelect","categoriesList","allBooks","filteredBooks","visibleCount","getChunkSize","getLoadStep","fetchBooks","res","data","cat","b","categories","c","fillCategories","renderBooks","err","chunk","step","end","booksToShow","filterByCategory","category","fetchCategoryBooks","selected","li","eventsSwiper","swiperInit","Swiper","Navigation","Pagination","Keyboard","burgerBtn","menu","body","closeBtn","navList","clickBurgerBtn","onEscPress","clickCloseBtn","link","event","iziToast","Accordion","backdrop","addToCartBtn","buyNowBtn","quantityInput","increase","decrease","bookCard","img","_a","title","_b","author","_c","price","_d","closeModal","qty"],"mappings":"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"}