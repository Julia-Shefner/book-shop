{"version":3,"file":"index.js","sources":["../src/js/books.js","../src/js/feedbacks.js","../src/js/header.js","../src/js/modal-contact.js"],"sourcesContent":["const API_BASE = 'https://books-backend.p.goit.global/books';\r\nconst booksList = document.getElementById('booksList');\r\nconst showMoreBtn = document.getElementById('showMoreBtn');\r\nconst booksCount = document.getElementById('booksCount');\r\nconst categorySelect = document.getElementById('categorySelect');\r\nconst categoriesList = document.getElementById('categoriesList');\r\n\r\nlet allBooks = [];\r\nlet filteredBooks = [];\r\nlet visibleCount = 0;\r\n\r\n// Динамічні налаштування\r\nfunction getChunkSize() {\r\n  if (window.innerWidth >= 768) return 24; // таблет / десктоп\r\n  return 10; // мобілка\r\n}\r\nfunction getLoadStep() {\r\n  return 4;\r\n}\r\n\r\n// Отримати всі книги\r\nasync function fetchBooks() {\r\n  try {\r\n    const res = await fetch(`${API_BASE}/top-books`);\r\n    if (!res.ok) throw new Error('Failed to load books');\r\n    const data = await res.json();\r\n\r\n    allBooks = data.flatMap(cat =>\r\n      cat.books.map(b => ({ ...b, category: cat.list_name }))\r\n    );\r\n    filteredBooks = [...allBooks];\r\n\r\n    const categories = [...new Set(data.map(c => c.list_name))];\r\n    fillCategories(categories);\r\n    visibleCount = 0;\r\n    renderBooks();\r\n  } catch (err) {\r\n    console.error('Error loading books:', err);\r\n  }\r\n}\r\n\r\n// Заповнення селекту та списку\r\nfunction fillCategories(categories) {\r\n  // селект (для мобілки/планшету)\r\n  if (categorySelect) {\r\n    categorySelect.innerHTML = `<option value=\"\">All Categories</option>`;\r\n    categorySelect.innerHTML += categories\r\n      .map(c => `<option value=\"${c}\">${c}</option>`)\r\n      .join('');\r\n  }\r\n\r\n  // список (для десктопу)\r\n  if (categoriesList) {\r\n    categoriesList.innerHTML = categories\r\n      .map(c => `<li data-category=\"${c}\">${c}</li>`)\r\n      .join('');\r\n\r\n    // ✅ Додаємо \"All categories\" першим, якщо його ще немає\r\n    if (!categoriesList.querySelector('[data-category=\"all\"]')) {\r\n      const allItem = document.createElement('li');\r\n      allItem.classList.add('category-item');\r\n      allItem.dataset.category = 'all';\r\n      allItem.textContent = 'All categories';\r\n      categoriesList.prepend(allItem);\r\n    }\r\n  }\r\n}\r\n\r\n// Рендер книг\r\nfunction renderBooks() {\r\n  const chunk = getChunkSize();\r\n  const step = getLoadStep();\r\n  const end = visibleCount === 0 ? chunk : visibleCount + step;\r\n\r\n  const booksToShow = filteredBooks.slice(0, end);\r\n\r\n  booksList.innerHTML = booksToShow\r\n    .map(\r\n      b => `\r\n      <li class=\"book-card\">\r\n        <img class=\"book-image\" src=\"${b.book_image}\" alt=\"${b.title}\" />\r\n        <div class=\"book-info\">\r\n          <div>\r\n            <h3 class=\"book-title\">${b.title}</h3>\r\n            <p class=\"book-author\">${b.author}</p>\r\n          </div>\r\n          <p class=\"book-price\">$${(Math.random() * 90 + 10).toFixed(2)}</p>\r\n        </div>\r\n        <button class=\"learn-more-btn\">Learn More</button>\r\n      </li>`\r\n    )\r\n    .join('');\r\n\r\n  visibleCount = booksToShow.length;\r\n  booksCount.textContent = `Showing ${visibleCount} of ${filteredBooks.length}`;\r\n  showMoreBtn.style.display =\r\n    visibleCount < filteredBooks.length ? 'block' : 'none';\r\n}\r\n\r\n// Показати більше\r\nshowMoreBtn.addEventListener('click', renderBooks);\r\n\r\n// Фільтрація\r\nfunction filterByCategory(category) {\r\n  visibleCount = 0;\r\n  if (!category || category === 'all') {\r\n    filteredBooks = [...allBooks];\r\n    renderBooks();\r\n    return;\r\n  }\r\n  fetchCategoryBooks(category);\r\n}\r\n\r\nasync function fetchCategoryBooks(category) {\r\n  try {\r\n    const res = await fetch(\r\n      `${API_BASE}/category?category=${encodeURIComponent(category)}`\r\n    );\r\n    if (!res.ok) throw new Error('Failed to load category books');\r\n    const data = await res.json();\r\n    filteredBooks = data;\r\n    renderBooks();\r\n  } catch (err) {\r\n    console.error('Error loading category books:', err);\r\n  }\r\n}\r\n\r\n//  Обробники подій\r\ncategorySelect.addEventListener('change', e => {\r\n  filterByCategory(e.target.value);\r\n});\r\n\r\ncategoriesList.addEventListener('click', e => {\r\n  if (e.target.tagName === 'LI') {\r\n    const selected = e.target.getAttribute('data-category');\r\n    document\r\n      .querySelectorAll('.categories-list li')\r\n      .forEach(li => li.classList.remove('active'));\r\n    e.target.classList.add('active');\r\n    filterByCategory(selected);\r\n  }\r\n});\r\n\r\n// Ініціалізація\r\nfetchBooks();\r\n","import Swiper from \"swiper\";\nimport \"swiper/css\";\nimport \"swiper/css/pagination\";\nimport { Navigation, Pagination } from \"swiper/modules\";\n\nnew Swiper(\".feedback-swiper\", {\n  modules: [Navigation, Pagination],\n  pagination: {\n    el: \".swiper-pagination\",\n    clickable: true,\n  },\n  navigation: {\n    nextEl: \".swiper-button-next\",\n    prevEl: \".swiper-button-prev\",\n  },\n  grabCursor: true,\n  breakpoints: {\n    375: {\n      slidesPerView: 1,\n      spaceBetween: 20,\n    },\n    768: {\n      slidesPerView: 2,\n      spaceBetween: 24,\n    },\n    1440: {\n      slidesPerView: 3,\n      spaceBetween: 24,\n    },\n  },\n});","const burgerBtn = document.querySelector('.burger-js');\nconst menu = document.querySelector('.header-menu');\nconst body = document.body;\nconst closeBtn = document.querySelector('.close-js');\nconst navList = document.querySelectorAll('.header-nav-link');\n\nburgerBtn.addEventListener('click', clickBurgerBtn);\nfunction clickBurgerBtn() {\n  menu.classList.add('active');\n  body.classList.add('menu-open');\n  window.addEventListener('keydown', onEscPress);\n}\n\ncloseBtn.addEventListener('click', clickCloseBtn);\nfunction clickCloseBtn() {\n  menu.classList.remove('active');\n  body.classList.remove('menu-open');\n  window.removeEventListener('keydown', onEscPress);\n}\nnavList.forEach(link => {\n  link.addEventListener('click', () => {\n    menu.classList.remove('active');\n    body.classList.remove('menu-open');\n  });\n});\n\nfunction onEscPress(event) {\n  if (event.key === 'Escape' || event.code === 'Escape') {\n    clickCloseBtn();\n  }\n}\n","const form = document.querySelector('.contact-form');\n// const eventsBtn = document.querySelector('.events-btn');\nconst btnList = document.querySelector('.events-list');\nconst modal = document.querySelector('.contact-modal-overlay');\nconst body = document.body;\nconst closeBtn = document.querySelector('.close-btn');\nconst modalTitle = document.querySelector('.modal-paragraph');\n\n//  Backdrop click\nfunction onBackdropClick(event) {\n  if (event.target === modal) {\n    closeContactModal();\n  }\n}\n// Open window logic\nbtnList.addEventListener('click', openContactModal);\nfunction openContactModal(event) {\n  const eventsBtn = event.target.closest('.events-btn');\n  if (!eventsBtn) {\n    return;\n  }\n  const item = eventsBtn.closest('.events-list-item');\n  const eventsTitle = item.querySelector('.events-subtitle').textContent;\n  modalTitle.textContent = eventsTitle;\n  modal.classList.add('is-open');\n  body.classList.add('menu-open');\n  window.addEventListener('keydown', onEscPress);\n\n  modal.addEventListener('click', onBackdropClick);\n}\n// keyboard event\nfunction onEscPress(event) {\n  if (event.key === 'Escape' || event.code === 'Escape') {\n    closeContactModal();\n  }\n}\n// Close window logic\ncloseBtn.addEventListener('click', closeContactModal);\nfunction closeContactModal() {\n  modal.classList.remove('is-open');\n  body.classList.remove('menu-open');\n  window.removeEventListener('keydown', onEscPress);\n  modal.removeEventListener('click', onBackdropClick);\n}\n\n// Submit logic\nform.addEventListener('submit', handlerSubmit);\nfunction handlerSubmit(event) {\n  event.preventDefault();\n  const form = event.target;\n  const name = form.elements.name.value.trim();\n  const email = form.elements.email.value.trim();\n  const inputs = form.querySelectorAll('input');\n  const errorMessages = form.querySelectorAll('.error-message');\n  let hasError = false;\n  inputs.forEach(input => input.classList.remove('error'));\n  errorMessages.forEach(msg => {\n    msg.textContent = '';\n    msg.classList.remove('show');\n  });\n\n  inputs.forEach(input => {\n    if (input.value.trim() === '') {\n      input.classList.add('error');\n      const msg = input.nextElementSibling;\n      if (msg) {\n        msg.textContent = 'Error text';\n        msg.classList.add('show');\n      }\n      hasError = true;\n    }\n  });\n\n  if (hasError) return;\n\n  const data = {\n    name: name,\n    email: email,\n  };\n\n  form.reset();\n}\n"],"names":["API_BASE","booksList","showMoreBtn","booksCount","categorySelect","categoriesList","allBooks","filteredBooks","visibleCount","getChunkSize","getLoadStep","fetchBooks","res","data","cat","b","categories","c","fillCategories","renderBooks","err","allItem","chunk","step","end","booksToShow","filterByCategory","category","fetchCategoryBooks","selected","li","Swiper","Navigation","Pagination","burgerBtn","menu","body","closeBtn","navList","clickBurgerBtn","onEscPress","clickCloseBtn","link","event","form","btnList","modal","modalTitle","onBackdropClick","closeContactModal","openContactModal","eventsBtn","eventsTitle","handlerSubmit","inputs","errorMessages","hasError","input","msg"],"mappings":"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"}