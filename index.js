import{a as k,S as E,N as L,P as _,K as B,A as oe,i as S,b as ne}from"./assets/vendor-BeNWam2W.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const h="https://books-backend.p.goit.global/books",w=document.getElementById("booksList"),l=document.getElementById("showMoreBtn"),D=document.getElementById("booksCount"),z=document.getElementById("categoriesList"),U=document.getElementById("customSelect"),se=document.getElementById("customSelectBtn"),re=document.querySelector(".custom-select-text"),F=document.getElementById("customSelectOptions");let d=[],a=[],c=0;function C(e){const t=new Set;return e.filter(n=>{const s=n.title.trim().toLowerCase();return t.has(s)?!1:(t.add(s),!0)})}function ie(){return window.innerWidth>=768?24:10}function ae(){return 4}async function ce(){try{const{data:e}=await k.get(`${h}/top-books`),t=[...new Set(e.map(o=>o.list_name))],n=t.map(o=>k.get(`${h}/category`,{params:{category:o}}).then(r=>r.data).catch(()=>[]));d=(await Promise.all(n)).flat(),d=C(d),d.length>120&&(d=d.slice(0,120)),a=[...d],le(t),c=0,I(!1)}catch(e){console.error("Error loading books:",e)}}function le(e){F.innerHTML=`
    <li data-category="all">All categories</li>
    ${e.map(t=>`<li data-category="${t}">${t}</li>`).join("")}
  `,z.innerHTML=`
    <li data-category="all">All categories</li>
    ${e.map(t=>`<li data-category="${t}">${t}</li>`).join("")}
  `}function I(e=!1){const t=ie(),n=ae(),s=c===0?t:c+n,r=a.slice(c,s).map(i=>`
      <li class="book-card" data-id="${i._id}">
        <img class="book-image" src="${i.book_image}" alt="${i.title}" />
        <div class="book-info">
          <div>
            <h3 class="book-title">${i.title}</h3>
            <p class="book-author">${i.author}</p>
          </div>
          <p class="book-price">$${(Math.random()*90+10).toFixed(2)}</p>
        </div>
        <button class="learn-more-btn" data-id="${i._id}">Learn More</button>
      </li>`).join("");e||(w.innerHTML=""),w.insertAdjacentHTML("beforeend",r),c=s,D.textContent=`Showing ${c} of ${a.length}`,l.style.display=c<a.length?"block":"none",document.dispatchEvent(new CustomEvent("booksRendered"))}function H(e){if(c=0,!e||e==="all"){a=C([...d]),I(!1);return}de(e)}async function de(e){try{const{data:t}=await k.get(`${h}/category`,{params:{category:e}});a=C(t),c=a.length,w.innerHTML=a.map(n=>`
        <li class="book-card" data-id="${n._id}">
          <img class="book-image" src="${n.book_image}" alt="${n.title}" />
          <div class="book-info">
            <div>
              <h3 class="book-title">${n.title}</h3>
              <p class="book-author">${n.author}</p>
            </div>
            <p class="book-price">$${(Math.random()*90+10).toFixed(2)}</p>
          </div>
          <button class="learn-more-btn" data-id="${n._id}">Learn More</button>
        </li>`).join(""),D.textContent=`Showing ${a.length} of ${a.length}`,l.style.display="none",document.dispatchEvent(new CustomEvent("booksRendered"))}catch(t){console.error("Error loading category books:",t)}}l.addEventListener("click",async()=>{l.disabled=!0,l.style.opacity="0.6",l.style.cursor="not-allowed",await I(!0),c<a.length&&(l.disabled=!1,l.style.opacity="",l.style.cursor="")});se.addEventListener("click",()=>{U.classList.toggle("open")});F.addEventListener("click",e=>{if(e.target.tagName==="LI"){const t=e.target.getAttribute("data-category");re.textContent=e.target.textContent,U.classList.remove("open"),H(t)}});z.addEventListener("click",e=>{if(e.target.tagName==="LI"){const t=e.target.getAttribute("data-category");H(t),e.target.classList.add("pressed"),setTimeout(()=>e.target.classList.remove("pressed"),150)}});ce();let m;function W(){window.innerWidth<1440&&!m?m=new E(".events-swiper",{modules:[L,_,B],pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0},breakpoints:{375:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:2,spaceBetween:24}}}):window.innerWidth>=1440&&m&&(m.destroy(!0,!0),m=null)}W();window.addEventListener("resize",W);new E(".feedback-swiper",{modules:[L,_,B],pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-nex",prevEl:".swiper-button-pre"},keyboard:{enabled:!0,onlyInViewport:!0},grabCursor:!0,breakpoints:{375:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});const ue=document.querySelector(".burger-js"),$=document.querySelector(".header-menu"),x=document.body,me=document.querySelector(".close-js"),pe=document.querySelectorAll(".header-nav-link");ue.addEventListener("click",ge);function ge(){$.classList.add("active"),x.classList.add("menu-open"),window.addEventListener("keydown",R)}me.addEventListener("click",K);function K(){$.classList.remove("active"),x.classList.remove("menu-open"),window.removeEventListener("keydown",R)}pe.forEach(e=>{e.addEventListener("click",()=>{$.classList.remove("active"),x.classList.remove("menu-open")})});function R(e){(e.key==="Escape"||e.code==="Escape")&&K()}let v;function Y(){v&&v.destroy(!0,!0),v=new E(".hero-slider",{modules:[L,B,oe],slidesPerView:1,allowTouchMove:!0,loop:!1,autoplay:{delay:5e3,disableOnInteraction:!0},keyboard:{enabled:!0,onlyInViewport:!1},navigation:{nextEl:".slider-button.next",prevEl:".slider-button.prev",disabledClass:"slider-button--disabled"},on:{init(){O(this)},slideChange(){O(this)}}})}function O(e){const t=document.querySelector(".slider-button.prev"),n=document.querySelector(".slider-button.next");t.disabled=e.isBeginning,n.disabled=e.isEnd}window.addEventListener("load",Y);let j;window.addEventListener("resize",()=>{clearTimeout(j),j=setTimeout(()=>{Y()},300)});S.settings({position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"});document.addEventListener("DOMContentLoaded",()=>{window.accordionInstance=new ne(".js-accordion",{duration:380,showMultiple:!0,collapse:!0}),document.querySelectorAll(".js-accordion .ac-panel").forEach(e=>{e.style.overflow="hidden",e.style.boxSizing="border-box"})});const f=document.getElementById("modal-backdrop"),fe=document.getElementById("close-modal"),ye=document.getElementById("add-to-cart"),be=document.getElementById("buy-now"),u=document.getElementById("quantity"),N=document.getElementById("increase"),V=document.getElementById("decrease");document.addEventListener("click",async e=>{var t,n,s,o;if(e.target.classList.contains("learn-more-btn")){const r=e.target.closest(".book-card");if(!r)return;const i=((t=r.querySelector(".book-image"))==null?void 0:t.src)||"",Z=((n=r.querySelector(".book-title"))==null?void 0:n.textContent)||"Untitled",ee=((s=r.querySelector(".book-author"))==null?void 0:s.textContent)||"Unknown",te=((o=r.querySelector(".book-price"))==null?void 0:o.textContent)||"$0.00",T=r.dataset.id;let A="Description not found";if(T)try{const g=await fetch(`https://books-backend.p.goit.global/books/${T}`);if(g.ok){const b=await g.json();b.description&&b.description.trim()!==""&&(A=b.description)}}catch(g){console.error("Помилка при отриманні опису книги:",g)}document.getElementById("book-image").src=i,document.getElementById("book-title").textContent=Z,document.getElementById("book-author").textContent=ee,document.getElementById("book-price").textContent=te,document.getElementById("details").textContent=A,document.getElementById("shipping").textContent="We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",document.getElementById("returns").textContent="You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.",f.classList.remove("is-hidden"),document.body.style.overflow="hidden"}});function q(){f.classList.add("is-hidden"),document.body.style.overflow=""}fe.addEventListener("click",q);f.addEventListener("click",e=>{e.target===f&&q()});document.addEventListener("keydown",e=>{e.key==="Escape"&&q()});N&&V&&u&&(N.addEventListener("click",()=>{u.value=parseInt(u.value)+1}),V.addEventListener("click",()=>{parseInt(u.value)>1&&(u.value=parseInt(u.value)-1)}));function ve(e,t,n,s){e=Math.abs(e);const o=e%10,r=e%100;return r>=11&&r<=19?s:o===1?t:o>=2&&o<=4?n:s}ye.addEventListener("click",()=>{const e=Number(u.value),t=ve(e,"книгу","книги","книг"),n=`📚 Додано ${e} ${t} до кошика`;S.show({message:n,backgroundColor:"#fff9e6",messageColor:"#000"})});be.addEventListener("click",e=>{e.preventDefault(),S.show({message:"📖 Дякуємо за покупку!",backgroundColor:"#fff9e6",messageColor:"#000"})});const M=document.querySelector(".contact-form"),ke=document.querySelector(".events-list"),p=document.querySelector(".contact-modal-overlay"),G=document.body,y=M.querySelectorAll("input"),J=M.querySelectorAll(".error-message"),he=document.querySelector(".close-btn"),we=document.querySelector(".modal-paragraph");function Q(e){e.target===p&&P()}ke.addEventListener("click",Ee);function Ee(e){const t=e.target.closest(".events-btn");if(!t)return;y.forEach(o=>o.classList.remove("error")),J.forEach(o=>{o.textContent="",o.classList.remove("show")});const s=t.closest(".events-list-item").querySelector(".events-subtitle").textContent;we.textContent=s,p.classList.add("is-open"),G.classList.add("menu-open"),window.addEventListener("keydown",X),p.addEventListener("click",Q)}function X(e){(e.key==="Escape"||e.code==="Escape")&&P()}he.addEventListener("click",P);function P(){y.forEach(e=>{e.value=""}),p.classList.remove("is-open"),G.classList.remove("menu-open"),window.removeEventListener("keydown",X),p.removeEventListener("click",Q)}M.addEventListener("submit",Le);function Le(e){e.preventDefault();const t=e.target;t.elements.name.value.trim(),t.elements.email.value.trim();let n=!1;y.forEach(s=>s.classList.remove("error")),J.forEach(s=>{s.textContent="",s.classList.remove("show")}),y.forEach(s=>{if(s.value.trim()===""){s.classList.add("error");const o=s.nextElementSibling;o&&(o.textContent="Error text",o.classList.add("show")),n=!0}}),!n&&t.reset()}
//# sourceMappingURL=index.js.map
